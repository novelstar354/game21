<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="UTF-8">
<title>è¾›å£ãƒ‘ãƒãƒ³ã‚³ å®Œå…¨ç‰ˆ</title>
<meta name="viewport" content="width=device-width,initial-scale=1.0,user-scalable=no">
 <link rel="icon" href="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcSoMdtS_7rFl2-K_Kd4LVlvt8rVc4peP6zifgcz-Uf7JQPukWdWPew_Wm5l&s=10" sizes="16Ã—16" type="image/png" />  
<style>
body{margin:0;background:#020617;color:#fff;font-family:sans-serif;text-align:center}
header{padding:10px;font-size:18px;font-weight:bold}
#game{position:relative;margin:auto;max-width:420px;height:640px;
border:3px solid #38bdf8;border-radius:12px;overflow:hidden}
canvas{display:block}
#ui{display:flex;flex-wrap:wrap;gap:6px;justify-content:center;padding:8px}
button{padding:8px 10px;border:none;border-radius:8px;
background:#38bdf8;color:#000;font-weight:bold}
button.active{background:#22c55e}
button.danger{background:#ef4444;color:#fff}

/* ãƒ¬ãƒãƒ¼ */
#lever{position:absolute;right:10px;bottom:70px;width:40px;height:160px;
background:#334155;border-radius:20px}
#leverKnob{position:absolute;left:50%;transform:translateX(-50%);
width:50px;height:50px;background:#facc15;border-radius:50%;top:0}

/* ã‚¯ãƒ¼ãƒ« */
#coolWrap{
position:absolute;left:10px;top:10px;width:140px;height:12px;
border:1px solid #38bdf8;border-radius:6px;overflow:hidden;
background:#020617;z-index:10}
#coolBar{height:100%;background:#38bdf8}

/* ã‚ªãƒ¼ãƒãƒ¼ãƒ¬ã‚¤ */
#bigWin,#gameOver{
position:absolute;inset:0;display:none;align-items:center;
justify-content:center;background:rgba(0,0,0,.9);z-index:10;
flex-direction:column}
#bigWin span{font-size:42px;color:#facc15;
animation:zoom 1s infinite alternate}
@keyframes zoom{to{transform:scale(1.3)}}
#gameOver span{font-size:36px;color:#ef4444;margin-bottom:10px}

/* æ“ä½œ */
#help{
position:absolute;left:8px;bottom:8px;
background:rgba(0,0,0,.6);border-radius:8px;
padding:8px 10px;font-size:12px;text-align:left}
   footer {
           padding: 30px;
           text-align: center;
           font-size: 0.85rem;
           color: rgba(255,255,255,0.5);
           border-top: 1px solid rgba(255,255,255,0.1);
           margin-top: 60px;
   }
</style>
</head>
<body>

<header>è¾›å£ãƒ‘ãƒãƒ³ã‚³ å®Œå…¨ç‰ˆ</header>

<div id="game">
<canvas id="c" width="420" height="640"></canvas>

<div id="coolWrap"><div id="coolBar"></div></div>
<div id="lever"><div id="leverKnob"></div></div>

<div id="bigWin"><span>ğŸ‰ å¤§å½“ãŸã‚Šï¼ ğŸ‰</span></div>
<div id="gameOver"><span>GAME OVER</span><div>è³‡é‡‘ãŒå°½ãã¾ã—ãŸ</div></div>

<div id="help">
Spaceï¼šç™ºå°„<br>
Aï¼šAUTO<br>
Bï¼šBGM<br>
Fï¼šFULL
</div>
</div>

<div id="ui">
ğŸ’´<span id="money">100000</span>å††ã€€
ğŸ±<span id="balls">300</span><br>
ğŸ“‰ æŠ•è³‡:<span id="invest">0</span>å††ã€€
ğŸ“ˆ å›åç‡:<span id="rate">--</span>%<br>

<button onclick="buyBalls()">ç‰100ç™º Â¥10,000</button>
<button onclick="shoot()">ç™ºå°„</button>
<button id="autoBtn" onclick="toggleAuto()">AUTO</button>
<button onclick="saveGame()">SAVE</button>
<button onclick="loadGame()">LOAD</button>
<button class="danger" onclick="resetGame()">RESET</button>
</div>
    <footer>
       Â© 2025 STAR CORPORATION - All Rights Reserved.
   </footer>


<script>
const c=document.getElementById("c"),ctx=c.getContext("2d");

/* åˆæœŸå€¤ */
const INIT_MONEY=100000, INIT_BALLS=300;

/* çŠ¶æ…‹ */
let money=INIT_MONEY, balls=INIT_BALLS, invest=0;
let ballList=[], gameOver=false;

/* UI */
const moneyEl=document.getElementById("money");
const ballsEl=document.getElementById("balls");
const investEl=document.getElementById("invest");
const rateEl=document.getElementById("rate");

/* ã‚¯ãƒ¼ãƒ« */
const COOLDOWN=800;
let lastShot=0;
const coolBar=document.getElementById("coolBar");

/* AUTO */
let auto=false;
const autoBtn=document.getElementById("autoBtn");
function toggleAuto(){
 auto=!auto;
 autoBtn.classList.toggle("active",auto);
}

/* å½“ãŸã‚Šã‚¾ãƒ¼ãƒ³ */
let zone={x:200,y:520,w:10,h:8,vx:3,vy:2,vis:false,t:0};
const SHOW=60,HIDE=160;

/* é‡˜ */
const pins=[];
for(let y=120;y<=420;y+=48)
for(let x=70;x<=350;x+=48)
 pins.push({x,y,r:6});

/* UIæ›´æ–° */
function updateUI(){
 moneyEl.textContent=money;
 ballsEl.textContent=balls;
 investEl.textContent=invest;
 rateEl.textContent=invest?((money/invest)*100).toFixed(1):"--";
 if(money<=0&&balls<=0) endGame();
}

/* ç‰è³¼å…¥ */
function buyBalls(){
 if(money<10000||gameOver) return;
 money-=10000;
 balls+=100;
 invest+=10000;
 updateUI();
}

/* ç™ºå°„ */
function shoot(){
 if(gameOver) return;
 const now=Date.now();
 if(now-lastShot<COOLDOWN||balls<=0) return;
 lastShot=now;
 balls--;
 ballList.push({x:210,y:40,vx:(Math.random()-.5)*2,vy:2,hit:false});
 updateUI();
}

/* å¤§å½“ãŸã‚Š */
function bigWin(){
 document.getElementById("bigWin").style.display="flex";
 money+=200000;
 setTimeout(()=>document.getElementById("bigWin").style.display="none",1500);
 updateUI();
}

/* ã‚²ãƒ¼ãƒ ã‚ªãƒ¼ãƒãƒ¼ */
function endGame(){
 gameOver=true;
 document.getElementById("gameOver").style.display="flex";
}

/* ã‚»ãƒ¼ãƒ– */
function saveGame(){
 localStorage.setItem("pachiSave",
  JSON.stringify({money,balls,invest}));
 alert("ã‚»ãƒ¼ãƒ–ã—ã¾ã—ãŸ");
}

/* ãƒ­ãƒ¼ãƒ‰ */
function loadGame(){
 const d=localStorage.getItem("pachiSave");
 if(!d) return;
 const s=JSON.parse(d);
 money=s.money; balls=s.balls; invest=s.invest;
 gameOver=false;
 document.getElementById("gameOver").style.display="none";
 updateUI();
}

/* ğŸ”„ ãƒªã‚»ãƒƒãƒˆ */
function resetGame(){
 if(!confirm("ã‚²ãƒ¼ãƒ ã‚’å®Œå…¨ã«ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ")) return;
 localStorage.removeItem("pachiSave");
 money=INIT_MONEY;
 balls=INIT_BALLS;
 invest=0;
 ballList=[];
 gameOver=false;
 auto=false;
 autoBtn.classList.remove("active");
 document.getElementById("gameOver").style.display="none";
 updateUI();
}

/* ãƒ«ãƒ¼ãƒ— */
function loop(){
 if(!gameOver && auto && balls>0 && Date.now()-lastShot>=COOLDOWN) shoot();
 coolBar.style.width=Math.min(100,(Date.now()-lastShot)/COOLDOWN*100)+"%";

 zone.t++;
 if(zone.vis && zone.t>SHOW){zone.vis=false;zone.t=0;}
 if(!zone.vis && zone.t>HIDE){zone.vis=true;zone.t=0;}
 if(zone.vis){
  zone.x+=zone.vx; zone.y+=zone.vy;
  if(zone.x<60||zone.x+zone.w>360) zone.vx*=-1;
  if(zone.y<480||zone.y+zone.h>580) zone.vy*=-1;
 }

 ctx.fillStyle="#020617";
 ctx.fillRect(0,0,420,640);

 ctx.fillStyle="#94a3b8";
 pins.forEach(p=>{
  ctx.beginPath();ctx.arc(p.x,p.y,p.r,0,6.28);ctx.fill();
 });

 if(zone.vis){
  ctx.strokeStyle="#facc15";
  ctx.strokeRect(zone.x,zone.y,zone.w,zone.h);
 }

 ctx.fillStyle="#e5e7eb";
 ballList.forEach(b=>{
  b.vy+=0.22;
  b.x+=b.vx; b.y+=b.vy;
  if(b.x<5||b.x>415) b.vx*=-1;
  pins.forEach(p=>{
   if(Math.hypot(b.x-p.x,b.y-p.y)<p.r+4){
    const a=Math.atan2(b.y-p.y,b.x-p.x);
    b.vx=Math.cos(a)*2;
    b.vy=Math.sin(a)*2;
   }
  });
  if(!b.hit&&zone.vis&&
     b.x>zone.x&&b.x<zone.x+zone.w&&
     b.y>zone.y&&b.y<zone.y+zone.h){
   b.hit=true;
   if(Math.random()<0.1) bigWin();
   b.y=700;
  }
  ctx.beginPath();ctx.arc(b.x,b.y,4,0,6.28);ctx.fill();
 });

 ballList=ballList.filter(b=>b.y<660);
 requestAnimationFrame(loop);
}

updateUI();
loop();
</script>
</body>
</html>
